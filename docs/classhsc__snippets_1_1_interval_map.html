<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>snippets: hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">snippets
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehsc__snippets.html">hsc_snippets</a></li><li class="navelem"><a class="el" href="classhsc__snippets_1_1_interval_map.html">IntervalMap</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classhsc__snippets_1_1_interval_map__coll__graph.png" border="0" usemap="#ahsc__snippets_1_1_interval_map_3_01_t_00_01_v_00_01update__policy__t_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="ahsc__snippets_1_1_interval_map_3_01_t_00_01_v_00_01update__policy__t_01_4_coll__map" id="ahsc__snippets_1_1_interval_map_3_01_t_00_01_v_00_01update__policy__t_01_4_coll__map">
<area shape="rect" title=" " alt="" coords="30,213,222,255"/>
<area shape="rect" title=" " alt="" coords="5,109,121,136"/>
<area shape="rect" title=" " alt="" coords="146,95,325,151"/>
<area shape="rect" title=" " alt="" coords="165,5,204,32"/>
<area shape="rect" title=" " alt="" coords="229,5,346,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a80c39eaa568b9edbd3724db50b9beecd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#a80c39eaa568b9edbd3724db50b9beecd">IntervalMap</a> ()=default</td></tr>
<tr class="separator:a80c39eaa568b9edbd3724db50b9beecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc4931124da7a75a32bba90aad1a2163"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#adc4931124da7a75a32bba90aad1a2163">update</a> (T left, T right, V value)</td></tr>
<tr class="separator:adc4931124da7a75a32bba90aad1a2163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a327fc014dfeeb3f77277803a969e2caa"><td class="memItemLeft" align="right" valign="top">std::optional&lt; V &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#a327fc014dfeeb3f77277803a969e2caa">query</a> (T index)</td></tr>
<tr class="separator:a327fc014dfeeb3f77277803a969e2caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd8b97c110eb138724e2042cea439bf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#acd8b97c110eb138724e2042cea439bf7">defragment</a> ()</td></tr>
<tr class="separator:acd8b97c110eb138724e2042cea439bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc576d5d3a7415bd3602d8fa755e8c96"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::tuple&lt; T, T, V &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#adc576d5d3a7415bd3602d8fa755e8c96">getIntervals</a> () const</td></tr>
<tr class="separator:adc576d5d3a7415bd3602d8fa755e8c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a73d0f1220298f1f1f1cb538b6cf38fe5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#a73d0f1220298f1f1f1cb538b6cf38fe5">no_fragmentation</a> ()</td></tr>
<tr class="separator:a73d0f1220298f1f1f1cb538b6cf38fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad7b2337cfd254a601cf883e0985c5d90"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="structhsc__snippets_1_1___interval.html">_Interval</a>&lt; T &gt;, V, std::less&lt;&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a></td></tr>
<tr class="separator:ad7b2337cfd254a601cf883e0985c5d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a568b71cdfa51201cdddad9a1bf298156"><td class="memItemLeft" align="right" valign="top">update_policy_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhsc__snippets_1_1_interval_map.html#a568b71cdfa51201cdddad9a1bf298156">update_policy</a></td></tr>
<tr class="separator:a568b71cdfa51201cdddad9a1bf298156"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;std::integral T, std::integral V, typename update_policy_t = Override&lt;T&gt;&gt;<br />
class hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;</h3>

<p>A data structure for efficiently managing intervals and their associated values. It allows for adding new intervals with specified values, querying the value at any given point within the intervals, and consolidating adjacent intervals with identical values to minimize fragmentation. The behavior of overlapping intervals during updates can be customized through a user-defined update policy.</p>
<p>Template Parameters:</p><ul>
<li>T: The type of the endpoints of the intervals, required to be an integral type (e.g., int, long).</li>
<li>V: The type of the values associated with each interval.</li>
<li>update_policy_t: A struct that defines the policy for resolving values of overlapping intervals. It must be a callable that takes two arguments of type V (the existing and new values) and returns a resolved value of type V.</li>
</ul>
<p>The class uses a balanced binary search tree (std::map) internally to store intervals in a non-overlapping manner, ensuring efficient queries and updates. The update and query operations are expected to perform in O(log n) time complexity, where n is the number of intervals in the map. </p>

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00088">88</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a80c39eaa568b9edbd3724db50b9beecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c39eaa568b9edbd3724db50b9beecd">&#9670;&nbsp;</a></span>IntervalMap()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::<a class="el" href="classhsc__snippets_1_1_interval_map.html">IntervalMap</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acd8b97c110eb138724e2042cea439bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd8b97c110eb138724e2042cea439bf7">&#9670;&nbsp;</a></span>defragment()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::defragment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consolidates adjacent intervals with the same value into a single interval to reduce fragmentation within the interval tree. </p>

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00259">259</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="comment">// We assume that erasion only affects the iterator of the erased element.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.size() &lt; 2)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keyword">auto</span> it = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.begin();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keyword">auto</span> right = it-&gt;first.right;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keyword">auto</span> value = it-&gt;second;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keyword">auto</span> next_it = std::next(it);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">do</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">if</span> (right == next_it-&gt;first.left &amp;&amp; value == next_it-&gt;second)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    <span class="keyword">auto</span> new_left = it-&gt;first.left;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <span class="keyword">auto</span> new_right = next_it-&gt;first.right;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.erase(next_it);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.erase(it);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <span class="keyword">auto</span> [new_it, success] = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{new_left, new_right}, value});</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    assert(success);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                    it = new_it;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    right = it-&gt;first.right;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    value = it-&gt;second;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                    next_it = std::next(it);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    it = std::next(it);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    right = it-&gt;first.right;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    value = it-&gt;second;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    next_it = std::next(it);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            } <span class="keywordflow">while</span> (next_it != <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.end());</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            assert(<a class="code" href="classhsc__snippets_1_1_interval_map.html#a73d0f1220298f1f1f1cb538b6cf38fe5">no_fragmentation</a>());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="ttc" id="aclasshsc__snippets_1_1_interval_map_html_a73d0f1220298f1f1f1cb538b6cf38fe5"><div class="ttname"><a href="classhsc__snippets_1_1_interval_map.html#a73d0f1220298f1f1f1cb538b6cf38fe5">hsc_snippets::IntervalMap::no_fragmentation</a></div><div class="ttdeci">bool no_fragmentation()</div><div class="ttdef"><b>Definition:</b> <a href="interval__map_8hpp_source.html#l00326">interval_map.hpp:326</a></div></div>
<div class="ttc" id="aclasshsc__snippets_1_1_interval_map_html_ad7b2337cfd254a601cf883e0985c5d90"><div class="ttname"><a href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">hsc_snippets::IntervalMap::map</a></div><div class="ttdeci">std::map&lt; _Interval&lt; T &gt;, V, std::less&lt;&gt; &gt; map</div><div class="ttdef"><b>Definition:</b> <a href="interval__map_8hpp_source.html#l00353">interval_map.hpp:353</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interval__map_8hpp_source.html#l00353">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::map</a>, and <a class="el" href="interval__map_8hpp_source.html#l00326">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::no_fragmentation()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhsc__snippets_1_1_interval_map_acd8b97c110eb138724e2042cea439bf7_cgraph.png" border="0" usemap="#aclasshsc__snippets_1_1_interval_map_acd8b97c110eb138724e2042cea439bf7_cgraph" alt=""/></div>
<map name="aclasshsc__snippets_1_1_interval_map_acd8b97c110eb138724e2042cea439bf7_cgraph" id="aclasshsc__snippets_1_1_interval_map_acd8b97c110eb138724e2042cea439bf7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,197,47"/>
<area shape="rect" href="classhsc__snippets_1_1_interval_map.html#a73d0f1220298f1f1f1cb538b6cf38fe5" title=" " alt="" coords="245,5,437,47"/>
</map>
</div>

</div>
</div>
<a id="adc576d5d3a7415bd3602d8fa755e8c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc576d5d3a7415bd3602d8fa755e8c96">&#9670;&nbsp;</a></span>getIntervals()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::tuple&lt;T, T, V&gt; &gt; <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::getIntervals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieves a list of all intervals and their associated values.</p>
<dl class="section return"><dt>Returns</dt><dd>A std::vector of std::tuple&lt;T, T, V&gt; elements, where each tuple represents an interval with its left and right boundaries and its associated value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00306">306</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            std::vector&lt;std::tuple&lt;T, T, V&gt;&gt; intervals;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            intervals.reserve(<a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.size());</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                intervals.emplace_back(entry.first.left, entry.first.right, entry.second);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">return</span> intervals;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interval__map_8hpp_source.html#l00353">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::map</a>.</p>

</div>
</div>
<a id="a73d0f1220298f1f1f1cb538b6cf38fe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73d0f1220298f1f1f1cb538b6cf38fe5">&#9670;&nbsp;</a></span>no_fragmentation()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::no_fragmentation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Verifies the absence of fragmentation in the map.</p>
<dl class="section return"><dt>Returns</dt><dd>True if no adjacent intervals with the same value are found unmerged, indicating a well-merged state. </dd></dl>

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00326">326</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.empty())</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">auto</span> it = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.begin();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keyword">auto</span> left = it-&gt;first.left;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keyword">auto</span> right = it-&gt;first.right;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keyword">auto</span> value = it-&gt;second;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            it = std::next(it);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">for</span> (; it != <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.end(); it = std::next(it))</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">if</span> (right == it-&gt;first.left &amp;&amp; value == it-&gt;second)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                left = it-&gt;first.left;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                right = it-&gt;first.right;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                value = it-&gt;second;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interval__map_8hpp_source.html#l00353">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::map</a>.</p>

<p class="reference">Referenced by <a class="el" href="interval__map_8hpp_source.html#l00259">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::defragment()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhsc__snippets_1_1_interval_map_a73d0f1220298f1f1f1cb538b6cf38fe5_icgraph.png" border="0" usemap="#aclasshsc__snippets_1_1_interval_map_a73d0f1220298f1f1f1cb538b6cf38fe5_icgraph" alt=""/></div>
<map name="aclasshsc__snippets_1_1_interval_map_a73d0f1220298f1f1f1cb538b6cf38fe5_icgraph" id="aclasshsc__snippets_1_1_interval_map_a73d0f1220298f1f1f1cb538b6cf38fe5_icgraph">
<area shape="rect" title=" " alt="" coords="245,5,437,47"/>
<area shape="rect" href="classhsc__snippets_1_1_interval_map.html#acd8b97c110eb138724e2042cea439bf7" title=" " alt="" coords="5,5,197,47"/>
</map>
</div>

</div>
</div>
<a id="a327fc014dfeeb3f77277803a969e2caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a327fc014dfeeb3f77277803a969e2caa">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;V&gt; <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::query </td>
          <td>(</td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queries the value associated with a specific index in the interval tree. If the index falls within an interval, the value for that interval is returned. If the index does not fall within any interval, std::nullopt is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>The index to query in the interval tree. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An std::optional&lt;V&gt; containing the value associated with the index if it falls within an interval, or std::nullopt if the index is not covered by any interval. </dd></dl>

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00243">243</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keyword">auto</span> it = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.find(index);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">if</span> (it == <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.end())</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interval__map_8hpp_source.html#l00353">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::map</a>.</p>

</div>
</div>
<a id="adc4931124da7a75a32bba90aad1a2163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4931124da7a75a32bba90aad1a2163">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::update </td>
          <td>(</td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">V&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the interval map by adding a new interval specified by left (inclusive) and right (exclusive) boundaries, associating it with the given value. If the new interval overlaps with existing intervals, the provided update_policy is applied to resolve the value conflicts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">left</td><td>The starting boundary of the interval to add, inclusive. </td></tr>
    <tr><td class="paramname">right</td><td>The ending boundary of the interval to add, exclusive. Must be greater than left. </td></tr>
    <tr><td class="paramname">value</td><td>The value to associate with the interval. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00102">102</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            assert(left &lt; right); <span class="comment">// or UB</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keyword">auto</span> it = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.find(left);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="keywordflow">if</span> (it != <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.end())</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keyword">auto</span> p = *it;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.erase(it);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="comment">// the value for the overlapped area</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keyword">auto</span> _value = <a class="code" href="classhsc__snippets_1_1_interval_map.html#a568b71cdfa51201cdddad9a1bf298156">update_policy</a>(p.second, value);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <span class="comment">// the code below is messy in effort to eliminate fragmentation</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordflow">if</span> (p.first.right &gt; right)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    <span class="comment">// [p.first.left, left) p.second</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    <span class="comment">// [left, right) _value</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    <span class="comment">// [right, p.first.right) p.second</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    <span class="keywordflow">if</span> (_value != p.second)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                        <span class="keywordflow">if</span> (p.first.left != left)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                            <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{p.first.left, left}, p.second});</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{left, right}, _value});</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{right, p.first.right}, p.second});</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{p.first.left, p.first.right}, _value});</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    <span class="comment">// [p.first.left, left) p.second</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    <span class="comment">// [left, p.first.right) _value</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    <span class="comment">// [p.first.right, right) We don&#39;t know!!!</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    <span class="keywordflow">if</span> (_value != p.second)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                        <span class="keywordflow">if</span> (p.first.left != left)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                        {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                            <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{p.first.left, left}, p.second});</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{left, p.first.right}, _value});</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{p.first.left, p.first.right}, _value});</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <span class="keywordflow">if</span> (p.first.right != right)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                        <span class="comment">// this is non-trivial</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#adc4931124da7a75a32bba90aad1a2163">update</a>(p.first.right, right, value);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        <span class="comment">// here there might be a fragmentation</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordflow">if</span> (right - 1 &gt; right)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <span class="keywordflow">throw</span> std::overflow_error(<span class="stringliteral">&quot;right underflows.&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            it = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.find(right - 1);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">if</span> (it != <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.end())</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keyword">auto</span> p = *it;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.erase(it);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                assert(left &lt; p.first.left); <span class="comment">// or map.find(left)!=map.end(), we should not in this branch</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                assert(right &gt; p.first.left);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                assert(right &lt;= p.first.right);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <a class="code" href="classhsc__snippets_1_1_interval_map.html#adc4931124da7a75a32bba90aad1a2163">update</a>(left, p.first.left, value);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keyword">auto</span> _value = <a class="code" href="classhsc__snippets_1_1_interval_map.html#a568b71cdfa51201cdddad9a1bf298156">update_policy</a>(p.second, value);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="comment">// [p.first.left, right) _value</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="comment">// [right, p.first.right) p.second</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">if</span> (_value == p.second)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{p.first.left, p.first.right}, _value});</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{p.first.left, right}, _value});</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="keywordflow">if</span> (right &lt; p.first.right)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{right, p.first.right}, p.second});</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="comment">// the first element that is no less than left</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="comment">// or interval.end&gt;left</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            it = <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.lower_bound(left);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">if</span> (it == <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.end())</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="comment">// here there might be a fragmentation</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{left, right}, value});</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="keyword">auto</span> p = *it;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                assert(left &lt; p.first.left);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">// we can safely add a new interval here.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordflow">if</span> (right &lt;= p.first.left)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{left, right}, value});</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.erase(it);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="comment">// if not, we add [left,p.first.left)</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#ad7b2337cfd254a601cf883e0985c5d90">map</a>.insert({_Interval&lt;T&gt;{left, p.first.left}, value});</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="comment">// and update [p.first.left,end)</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <a class="code" href="classhsc__snippets_1_1_interval_map.html#adc4931124da7a75a32bba90aad1a2163">update</a>(p.first.left, right, value);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        }</div>
<div class="ttc" id="aclasshsc__snippets_1_1_interval_map_html_a568b71cdfa51201cdddad9a1bf298156"><div class="ttname"><a href="classhsc__snippets_1_1_interval_map.html#a568b71cdfa51201cdddad9a1bf298156">hsc_snippets::IntervalMap::update_policy</a></div><div class="ttdeci">update_policy_t update_policy</div><div class="ttdef"><b>Definition:</b> <a href="interval__map_8hpp_source.html#l00354">interval_map.hpp:354</a></div></div>
<div class="ttc" id="aclasshsc__snippets_1_1_interval_map_html_adc4931124da7a75a32bba90aad1a2163"><div class="ttname"><a href="classhsc__snippets_1_1_interval_map.html#adc4931124da7a75a32bba90aad1a2163">hsc_snippets::IntervalMap::update</a></div><div class="ttdeci">void update(T left, T right, V value)</div><div class="ttdef"><b>Definition:</b> <a href="interval__map_8hpp_source.html#l00102">interval_map.hpp:102</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interval__map_8hpp_source.html#l00015">hsc_snippets::_Interval&lt; T &gt;::left</a>, <a class="el" href="interval__map_8hpp_source.html#l00353">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::map</a>, <a class="el" href="interval__map_8hpp_source.html#l00016">hsc_snippets::_Interval&lt; T &gt;::right</a>, and <a class="el" href="interval__map_8hpp_source.html#l00354">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::update_policy</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="ad7b2337cfd254a601cf883e0985c5d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7b2337cfd254a601cf883e0985c5d90">&#9670;&nbsp;</a></span>map</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="structhsc__snippets_1_1___interval.html">_Interval</a>&lt;T&gt;, V, std::less&lt;&gt; &gt; <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00353">353</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="interval__map_8hpp_source.html#l00259">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::defragment()</a>, <a class="el" href="interval__map_8hpp_source.html#l00306">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::getIntervals()</a>, <a class="el" href="interval__map_8hpp_source.html#l00326">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::no_fragmentation()</a>, <a class="el" href="interval__map_8hpp_source.html#l00243">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::query()</a>, and <a class="el" href="interval__map_8hpp_source.html#l00102">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::update()</a>.</p>

</div>
</div>
<a id="a568b71cdfa51201cdddad9a1bf298156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a568b71cdfa51201cdddad9a1bf298156">&#9670;&nbsp;</a></span>update_policy</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">update_policy_t <a class="el" href="classhsc__snippets_1_1_interval_map.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::update_policy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="interval__map_8hpp_source.html#l00354">354</a> of file <a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="interval__map_8hpp_source.html#l00102">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;::update()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="interval__map_8hpp_source.html">interval_map.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 28 2024 13:16:12 for snippets by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
