<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>snippets: hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">snippets<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehsc__snippets.html">hsc_snippets</a></li><li class="navelem"><a class="el" href="classhsc__snippets_1_1IntervalMap.html">IntervalMap</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classhsc__snippets_1_1IntervalMap-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="interval_8hpp_source.html">interval.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a80c39eaa568b9edbd3724db50b9beecd" id="r_a80c39eaa568b9edbd3724db50b9beecd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a80c39eaa568b9edbd3724db50b9beecd">IntervalMap</a> ()=default</td></tr>
<tr class="separator:a80c39eaa568b9edbd3724db50b9beecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc4931124da7a75a32bba90aad1a2163" id="r_adc4931124da7a75a32bba90aad1a2163"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc4931124da7a75a32bba90aad1a2163">update</a> (T left, T right, V value)</td></tr>
<tr class="separator:adc4931124da7a75a32bba90aad1a2163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44ebb8ded3bc04933be34e760f0133dd" id="r_a44ebb8ded3bc04933be34e760f0133dd"><td class="memItemLeft" align="right" valign="top">std::optional&lt; V &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44ebb8ded3bc04933be34e760f0133dd">query</a> (T index)</td></tr>
<tr class="separator:a44ebb8ded3bc04933be34e760f0133dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd8b97c110eb138724e2042cea439bf7" id="r_acd8b97c110eb138724e2042cea439bf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd8b97c110eb138724e2042cea439bf7">defragment</a> ()</td></tr>
<tr class="separator:acd8b97c110eb138724e2042cea439bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f7962d440b1bd213ff8c94d2c476b2" id="r_a08f7962d440b1bd213ff8c94d2c476b2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::tuple&lt; T, T, V &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08f7962d440b1bd213ff8c94d2c476b2">getIntervals</a> () const</td></tr>
<tr class="separator:a08f7962d440b1bd213ff8c94d2c476b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;std::integral T, std::integral V, typename update_policy_t = Override&lt;T&gt;&gt;<br />
class hsc_snippets::IntervalMap&lt; T, V, update_policy_t &gt;</div><p>A data structure for efficiently managing intervals and their associated values. It allows for adding new intervals with specified values, querying the value at any given point within the intervals, and consolidating adjacent intervals with identical values to minimize fragmentation. The behavior of overlapping intervals during updates can be customized through a user-defined update policy.</p>
<p>Template Parameters:</p><ul>
<li>T: The type of the endpoints of the intervals, required to be an integral type (e.g., int, long).</li>
<li>V: The type of the values associated with each interval.</li>
<li>update_policy_t: A struct that defines the policy for resolving values of overlapping intervals. It must be a callable that takes two arguments of type V (the existing and new values) and returns a resolved value of type V.</li>
</ul>
<p>The class uses a balanced binary search tree (std::map) internally to store intervals in a non-overlapping manner, ensuring efficient queries and updates. The update and query operations are expected to perform in O(log n) time complexity, where n is the number of intervals in the map. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a80c39eaa568b9edbd3724db50b9beecd" name="a80c39eaa568b9edbd3724db50b9beecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c39eaa568b9edbd3724db50b9beecd">&#9670;&#160;</a></span>IntervalMap()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classhsc__snippets_1_1IntervalMap.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::IntervalMap </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acd8b97c110eb138724e2042cea439bf7" name="acd8b97c110eb138724e2042cea439bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd8b97c110eb138724e2042cea439bf7">&#9670;&#160;</a></span>defragment()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhsc__snippets_1_1IntervalMap.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::defragment </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consolidates adjacent intervals with the same value into a single interval to reduce fragmentation within the interval tree. </p>

</div>
</div>
<a id="a08f7962d440b1bd213ff8c94d2c476b2" name="a08f7962d440b1bd213ff8c94d2c476b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08f7962d440b1bd213ff8c94d2c476b2">&#9670;&#160;</a></span>getIntervals()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::tuple&lt; T, T, V &gt; &gt; <a class="el" href="classhsc__snippets_1_1IntervalMap.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::getIntervals </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieves a list of all intervals and their associated values.</p>
<dl class="section return"><dt>Returns</dt><dd>A std::vector of std::tuple&lt;T, T, V&gt; elements, where each tuple represents an interval with its left and right boundaries and its associated value. </dd></dl>

</div>
</div>
<a id="a44ebb8ded3bc04933be34e760f0133dd" name="a44ebb8ded3bc04933be34e760f0133dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44ebb8ded3bc04933be34e760f0133dd">&#9670;&#160;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; V &gt; <a class="el" href="classhsc__snippets_1_1IntervalMap.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::query </td>
          <td>(</td>
          <td class="paramtype">T</td>          <td class="paramname"><span class="paramname"><em>index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queries the value associated with a specific index in the interval tree. If the index falls within an interval, the value for that interval is returned. If the index does not fall within any interval, std::nullopt is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>The index to query in the interval tree. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An std::optional&lt;V&gt; containing the value associated with the index if it falls within an interval, or std::nullopt if the index is not covered by any interval. </dd></dl>

</div>
</div>
<a id="adc4931124da7a75a32bba90aad1a2163" name="adc4931124da7a75a32bba90aad1a2163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4931124da7a75a32bba90aad1a2163">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::integral T, std::integral V, typename update_policy_t  = Override&lt;T&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhsc__snippets_1_1IntervalMap.html">hsc_snippets::IntervalMap</a>&lt; T, V, update_policy_t &gt;::update </td>
          <td>(</td>
          <td class="paramtype">T</td>          <td class="paramname"><span class="paramname"><em>left</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T</td>          <td class="paramname"><span class="paramname"><em>right</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">V</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the interval map by adding a new interval specified by left (inclusive) and right (exclusive) boundaries, associating it with the given value. If the new interval overlaps with existing intervals, the provided update_policy is applied to resolve the value conflicts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">left</td><td>The starting boundary of the interval to add, inclusive. </td></tr>
    <tr><td class="paramname">right</td><td>The ending boundary of the interval to add, exclusive. Must be greater than left. </td></tr>
    <tr><td class="paramname">value</td><td>The value to associate with the interval. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="interval_8hpp_source.html">interval.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
